
<div class="max-w-7xl mx-auto pb-12">
    <header class="mb-10">
        <h1 class="text-4xl font-black text-slate-900 dark:text-white tracking-tight mb-2">
            {{ isEditMode() ? '编辑问题词条' : '贡献/新增问题' }}
        </h1>
        <p class="text-lg text-slate-500 dark:text-slate-400">
            {{ isEditMode() ? '更新现有的技术沉淀。' : '沉淀技术经验，帮助团队快速脱坑。' }}
        </p>
    </header>

    <div class="flex flex-col xl:flex-row gap-8">
        <!-- Form Section -->
        <div class="xl:w-3/5">
            <form [formGroup]="faqForm" (ngSubmit)="onSubmit()" class="space-y-6">
                
                <!-- Basic Info Card -->
                <div class="bg-white/80 dark:bg-slate-800/50 backdrop-blur border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-lg transition-colors duration-300">
                    <h2 class="text-lg font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wide mb-6 border-b border-slate-100 dark:border-slate-700 pb-2">基本信息</h2>
                    
                    <div class="space-y-6">
                        <div>
                            <label for="title" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">标题 (问题简述) <span class="text-red-500">*</span></label>
                            <input type="text" id="title" formControlName="title" placeholder="例如：异步校验失败导致死循环" class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all">
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="component" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">所属模块 <span class="text-red-500">*</span></label>
                                <select id="component" formControlName="component" class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all">
                                    <option value="Form">Form 表单</option>
                                    <option value="Table">Table 表格</option>
                                    <option value="Project">Project 工程</option>
                                    <option value="Backend">Backend 后端</option>
                                </select>
                            </div>
                            <div>
                                <label for="version" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">影响版本 <span class="text-red-500">*</span></label>
                                <input type="text" id="version" formControlName="version" placeholder="例如 1.2.x" class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="tags" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">标签 (逗号分隔) <span class="text-red-500">*</span></label>
                                <input type="text" id="tags" formControlName="tags" placeholder="Tag1, Tag2" class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all">
                            </div>
                             <div>
                                <label for="errorCode" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">错误码 (可选)</label>
                                <input type="text" id="errorCode" formControlName="errorCode" placeholder="后端返回的 Error Code" class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Card -->
                <div class="bg-white/80 dark:bg-slate-800/50 backdrop-blur border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-lg transition-colors duration-300">
                     <h2 class="text-lg font-bold text-pink-600 dark:text-pink-400 uppercase tracking-wide mb-6 border-b border-slate-100 dark:border-slate-700 pb-2">详细内容</h2>
                     <div class="space-y-6">
                        <div>
                            <label for="phenomenon" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">问题现象 <span class="text-red-500">*</span></label>
                            <textarea id="phenomenon" formControlName="phenomenon" rows="4" placeholder="详细描述复现步骤、控制台报错信息等..." class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all"></textarea>
                        </div>
                         <div>
                            <label for="solution" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">解决方案 <span class="text-red-500">*</span></label>
                            <textarea id="solution" formControlName="solution" rows="4" placeholder="根本原因分析及修复步骤..." class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all"></textarea>
                        </div>
                     </div>
                </div>

                <!-- Technical Card -->
                <div class="bg-white/80 dark:bg-slate-800/50 backdrop-blur border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-lg transition-colors duration-300">
                     <h2 class="text-lg font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-wide mb-6 border-b border-slate-100 dark:border-slate-700 pb-2">排查与验证</h2>
                     <div class="space-y-6">
                        <div>
                            <label for="troubleshootingFlow" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">排查流程图 (Mermaid) <span class="text-red-500">*</span></label>
                            <div class="relative">
                                <textarea id="troubleshootingFlow" formControlName="troubleshootingFlow" rows="6" class="font-mono text-sm block w-full bg-slate-100 dark:bg-slate-950 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-emerald-600 dark:text-green-400 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"></textarea>
                                <div class="absolute top-2 right-2 text-xs text-slate-400 pointer-events-none">Mermaid Syntax</div>
                            </div>
                        </div>
                        <div>
                            <label for="validationMethod" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">验证方法 <span class="text-red-500">*</span></label>
                            <textarea id="validationMethod" formControlName="validationMethod" rows="3" placeholder="如何确认问题已修复..." class="block w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"></textarea>
                        </div>
                     </div>
                </div>

                <!-- Action Buttons -->
                <div class="sticky bottom-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-2xl flex items-center justify-between">
                    <span class="text-sm text-slate-500 dark:text-slate-400">
                        {{ faqForm.valid ? '准备就绪' : '请填写所有必填项' }}
                    </span>
                    <button type="submit" [disabled]="faqForm.invalid || isSubmitting()" 
                        class="px-8 py-3 rounded-lg font-bold text-white transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/30">
                        {{ isSubmitting() ? '提交中...' : (isEditMode() ? '保存修改' : '立即发布') }}
                    </button>
                </div>
            </form>
        </div>

        <!-- Helper Section -->
        <div class="xl:w-2/5 hidden xl:block">
            <div class="sticky top-6 space-y-6">
                <div class="bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-500/30 p-6 rounded-xl">
                    <h3 class="text-indigo-800 dark:text-indigo-300 font-bold mb-2">编写指南</h3>
                    <ul class="list-disc list-inside space-y-2 text-sm text-indigo-700 dark:text-indigo-400/80">
                        <li>标题应简洁明了，包含关键词</li>
                        <li>现象描述需包含复现步骤</li>
                        <li>Mermaid 图表请保持语法正确</li>
                        <li>提交后可在首页即时看到更新</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
